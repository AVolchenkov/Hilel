<html>

<head>
    <title>JAVASCRIPT HW3</title>
</head>

<body>
    <script>
        // ЗАДАНИЯ ДЛЯ РАЗМИНКИ!!!!!!)))

        //1) Создать обьект car со следующими свойствами model - 'Mercedes', price - '60000', type - 'sedan', year - 2019, quantity - 4 
        // Написать функцию которая будет принимать обьект вычитать 2 с поля quantity и возвращать price*quantity !!!
        const car = {
            model: 'Mercedes',
            price: '60000',
            type: 'sedan',
            year: '2019',
            quantity: '4',
        }
        function getPrice(car) {
            return (car.quantity - 2) * car.price;

        }
        console.log(getPrice(car));


        // 2) Записать в новую переменную только те обьекты у которых gender - m и age > 18
        const dataExample = [{
            name: 'John Doe',
            gender: 'm',
            age: 27,
        }, {
            name: 'Harvey Cox',
            gender: 'm',
            age: 16,
        }, {
            name: 'Nathan Dixon',
            gender: 'm',
            age: 23,
        }, {
            name: 'Lily Wyatt',
            gender: 'f',
            age: 28,
        }, {
            name: 'Morgan Lawson',
            gender: 'm',
            age: 50,
        }, {
            name: 'Lilly Blackburn',
            gender: 'f',
            age: 41,
        }, {
            name: 'Kate Sanderson',
            gender: 'f',
            age: 62,
        }, {
            name: 'Reece Howard',
            gender: 'm',
            age: 31,
        }, {
            name: 'Adam Doherty',
            gender: 'm',
            age: 52,
        }, {
            name: 'Eloise Wallace',
            gender: 'f',
            age: 24,
        }, {
            name: 'Luke Nolan',
            gender: 'm',
            age: 69,
        }];

        let result = [];
        for (let i = 0; i < dataExample.length; i++) {
            if (dataExample[i].gender === 'm' && dataExample[i].age > 18) {
                result.push(dataExample[i])
            }
        }
        console.log(result)

        // 3) Написать фунцию которая принимает 2 параметра! 1 -  число которое будет умножаться на себя такое количество раз которое указано во втором параметре!

        function multiplyA(a, b) {
            if (b === 1) {
                return a;
            } else {
                return a * multiplyA(a, b - 1)
            }
        }
        console.log(multiplyA(2, 4))

        // 4) Написать функцию которая принимает 2 параметра from и to, и будет считать сумму  всех нечетных чисел и потом среднее арифметическое от этой суммы!
        // Задачу решить 2-мя способами! Цыклами и рекурсией!

        function sum(from, to) {
            let res = 0;
            let j = 0;
            for (let i = from; i <= to; i++) {

                if (i % 2 !== 0) {
                    res += i;
                    j++
                }
            }
            return res / j
        }




        function recursiveSum(from, to) {
            // введем переменную для посчета кол-ва нечетных чисел от from до to
            let OddQuantity = 0
            // ф-я возвращающая сумму нечетных чисел в диапозоне от from до to. 
            const sum = (from, to) => {

                if (from > to) {
                    return 0
                }

                if (from % 2 !== 0) {
                    OddQuantity++;
                    return from + sum(from + 1, to);

                } else {
                    return sum(from + 1, to);
                }
            }
            // возвращаем сумму всех нечетных чисел в диапазоне или, если в диапазоне не существует нечетных чисел (например 10, 10), выводим соответствующее сообщение.
            return (sum(from, to) / OddQuantity) || 'В введенном диапазоне не существует нечетных чисел';
        }

        console.log('normal:', sum(10, 20));
        console.log('recursion:', recursiveSum(10, 20));

        // 5) Написать поясниние как будет выполнятся в коллстэке следующий код!
        function a() {
            return b();
        }

        function b() {
            return c();
        }

        function c() {
            return d();
        }
        function d() {
            return 'HELLO';
        }
        a();
        

        //  1. вызывается a()  и попадает в коллстек.
        //  2. ф-я а() вызывает ф-ю b() и b() попадает в коллстек.
        //  3. ф-я b() вызывает ф-ю c() и с() попадает в коллстек.
        //  4. ф-я с() вызвала ф-ю d(), d() попадает в коллстек и возвращает результат.
        //  5. тк d() вернула результат, то d() уходит из коллстека.
        //  6. с() вернула результат и уходит из коллстека
        //  7. b()  вернула результат и уходит из коллстека         
        //  8. a() вернула результат и уходит из коллстека


        // 6) Есть переменные! Создать обьект используя эти переменные с ключами, имена которых являются значениями этих переменных!!
        let var1 = "name";
        let var2 = "lastName";
        let var3 = "fullName";
        let var4 = "age";

        let obj = {};
        obj[var1] = 'var1'
        obj[var2] = 'var2'
        obj[var3] = 'var3'
        obj[var4] = 'var4'
        console.log(obj)

        // Advanced
        // 7)  Используя  обьект который лежит в переменной impScreen отфильтровать массив в поле children по полю type
        // чтобы остались только те у которых значение rich_text

        const impScreen = {
            name: "Impressum",
            uuid: "0cc57361-9c7d-4f08-a6d9-c254f3516e7d",
            content: {
                component: "page",
                children: [
                    {
                        type: "rich_text",
                        data: {
                            _uid: "f6c0525c-7b90-4b64-8166-de0524f53aec",
                            content: "*Hello*, this is the **first** text!\n\nThis is a [link](https://google.com)",
                            customClass: ""
                        }
                    },
                    {
                        type: "info_text",
                        data: {
                            _uid: "3fb42198-07d4-4820-90f5-08afe01b47c1",
                            content: "Und hier kommt noch ein Absatz für Christian!",
                            customClass: ""
                        }
                    },
                    {
                        type: "rich_text",
                        data: {
                            _uid: "3fb42198-07d4-4820-90f5-08afe01b47c1",
                            content: "Absatz für Christian!",
                            customClass: ""
                        }
                    },
                    {
                        type: "image",
                        data: {
                            _uid: "3fb42198-07d4-4820-90f5-08afe01b47c1",
                            content: "Christian!",
                            customClass: ""
                        }
                    }
                ]
            }
        };

        for (let i = 0; i < impScreen.content.children.length; i++) {   // получаетс здесь необходимо вначале достучатся до объекта в объекте,
            if (impScreen.content.children[i].type !== 'rich_text') {  // а потом в объекте content достучатся до массива с данными, которые нам необходимо отфильтровать.
                impScreen.content.children.splice(i, 1)                 // все что не 'rich_text' просто удаляем
            }
        }

        console.log(impScreen)

    </script>
</body>

</html>